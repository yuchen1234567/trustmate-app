<%- include('partials/navbar') %>

<div class="chats-page">
    <h1>Conversations</h1>
    
    <% if (chats.length === 0) { %>
        <p>No chats yet.</p>
    <% } else { %>
        <div class="chats-list">
            <% chats.forEach(chat => { %>
                <div class="chat-item">
                    <h3>Order #<%= chat.order_id %></h3>
                    <p>Conversation with: <%= chat.other_user %></p>
                    <p>Total: $<%= typeof chat.total_amount === 'number' ? chat.total_amount.toFixed(2) : parseFloat(chat.total_amount || 0).toFixed(2) %></p>
                    <a href="/chat/<%= chat.order_id %>" class="btn-view">Open conversation</a>
                </div>
            <% }); %>
        </div>
    <% } %>
</div>

<style>
.chats-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
}

.chat-item {
    background: #fff;
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
</style>

<%- include('partials/footer') %>
