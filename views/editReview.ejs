<%- include('partials/navbar') %>

<div class="review-page">
    <h1>Edit Review</h1>
    
    <% if (error) { %>
        <div class="error-message"><%= error %></div>
    <% } %>
    
    <form action="/reviews/update/<%= review.review_id %>" method="POST" class="review-form">
        <h3>Edit your review</h3>
        
        <div class="rating-input">
            <label>Rating:</label>
            <div class="stars">
                <% for(let i = 1; i <= 5; i++) { %>
                    <input type="radio" name="rating" value="<%= i %>" id="star<%= i %>" <%= review.rating == i ? 'checked' : '' %> required>
                    <label for="star<%= i %>">â˜…</label>
                <% } %>
            </div>
        </div>
        
        <div class="form-group">
            <label>Follow-up review:</label>
            <textarea name="comment" rows="5" maxlength="400" placeholder="Share more about your experience or the reason you're editing your review"><%= review.comment %></textarea>
            <small>0/400 characters</small>
        </div>
        
        <div class="form-group">
            <label>Give a compliment (optional):</label>
            <div class="tags-input">
                <% const existingTags = review.tags ? review.tags.split(',') : []; %>
                <label><input type="checkbox" name="tags" value="Updated listings" <%= existingTags.includes('Updated listings') ? 'checked' : '' %>> Updated listings</label>
                <label><input type="checkbox" name="tags" value="Goes the extra mile" <%= existingTags.includes('Goes the extra mile') ? 'checked' : '' %>> Goes the extra mile</label>
                <label><input type="checkbox" name="tags" value="Knows their stuff" <%= existingTags.includes('Knows their stuff') ? 'checked' : '' %>> Knows their stuff</label>
                <label><input type="checkbox" name="tags" value="Amazing chat" <%= existingTags.includes('Amazing chat') ? 'checked' : '' %>> Amazing chat</label>
            </div>
        </div>
        
        <button type="submit" class="btn-primary">Submit</button>
        <a href="/orders/<%= review.order_id %>" class="btn-secondary">Cancel</a>
    </form>
</div>

<%- include('partials/footer') %>
