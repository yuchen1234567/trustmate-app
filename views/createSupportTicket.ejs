<%- include('partials/navbar') %>

<div class="container">
    <div class="page-header">
        <h1>Create Support Ticket</h1>
        <p>Having an issue? Our support team is here to help</p>
    </div>

    <% if (error) { %>
        <div class="alert alert-error"><%= error %></div>
    <% } %>

    <form action="/support/tickets/create" method="POST" class="support-form">
        <div class="form-group">
            <label for="subject">Subject *</label>
            <input type="text" id="subject" name="subject" required 
                   placeholder="Brief description of your issue" maxlength="255">
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="category">Category *</label>
                <select id="category" name="category" required>
                    <option value="">Please select</option>
                    <option value="order_issue">Order Issue</option>
                    <option value="payment_issue">Payment Issue</option>
                    <option value="service_inquiry">Service Inquiry</option>
                    <option value="technical_support">Technical Support</option>
                    <option value="complaint">Complaint</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="priority">Priority</label>
                <select id="priority" name="priority">
                    <option value="low">Low</option>
                    <option value="medium" selected>Medium</option>
                    <option value="high">High</option>
                    <option value="urgent">Urgent</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="order_id">Related Order (Optional)</label>
            <select id="order_id" name="order_id">
                <option value="">No related order</option>
                <% orders.forEach(order => { %>
                    <option value="<%= order.order_id %>">
                        Order #<%= order.order_id %> - <%= new Date(order.created_at).toLocaleDateString() %>
                    </option>
                <% }); %>
            </select>
        </div>

        <div class="form-group">
            <label for="message">Detailed Description *</label>
            <textarea id="message" name="message" rows="6" required 
                      placeholder="Please describe your issue in detail so we can better assist you"></textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Submit Ticket</button>
            <a href="/support/tickets" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<%- include('partials/footer') %>
